{"version":3,"file":"global.min.js","sources":["../../src/extras/global.js"],"sourcesContent":["/*\n * SystemJS global script loading support\n * Extra for the s.js build only\n * (Included by default in system.js build)\n */\n(function (global) {\n  const systemJSPrototype = global.System.constructor.prototype;\n  const isIE = navigator.userAgent.indexOf('Trident') !== -1;\n\n  // safari unpredictably lists some new globals first or second in object order\n  let firstGlobalProp, secondGlobalProp, lastGlobalProp;\n  function getGlobalProp () {\n    let cnt = 0;\n    let lastProp;\n    for (let p in global) {\n      // do not check frames cause it could be removed during import\n      if (\n        !global.hasOwnProperty(p)\n        || (!isNaN(p) && p < global.length)\n        || (isIE && global[p] && global[p].parent === window)\n      )\n        continue;\n      if (cnt === 0 && p !== firstGlobalProp || cnt === 1 && p !== secondGlobalProp)\n        return p;\n      cnt++;\n      lastProp = p;\n    }\n    if (lastProp !== lastGlobalProp)\n      return lastProp;\n  }\n\n  function noteGlobalProps () {\n    // alternatively Object.keys(global).pop()\n    // but this may be faster (pending benchmarks)\n    firstGlobalProp = secondGlobalProp = undefined;\n    for (let p in global) {\n      // do not check frames cause it could be removed during import\n      if (\n        !global.hasOwnProperty(p)\n        || (!isNaN(p) && p < global.length)\n        || (isIE && global[p] && global[p].parent === window)\n      )\n        continue;\n      if (!firstGlobalProp)\n        firstGlobalProp = p;\n      else if (!secondGlobalProp)\n        secondGlobalProp = p;\n      lastGlobalProp = p;\n    }\n    return lastGlobalProp;\n  }\n\n  const impt = systemJSPrototype.import;\n  systemJSPrototype.import = function (id, parentUrl) {\n    noteGlobalProps();\n    return impt.call(this, id, parentUrl);\n  };\n\n  const emptyInstantiation = [[], function () { return {} }];\n\n  const getRegister = systemJSPrototype.getRegister;\n  systemJSPrototype.getRegister = function () {\n    const lastRegister = getRegister.call(this);\n    if (lastRegister)\n      return lastRegister;\n\n    // no registration -> attempt a global detection as difference from snapshot\n    // when multiple globals, we take the global value to be the last defined new global object property\n    // for performance, this will not support multi-version / global collisions as previous SystemJS versions did\n    // note in Edge, deleting and re-adding a global does not change its ordering\n    const globalProp = getGlobalProp();\n    if (!globalProp)\n      return emptyInstantiation;\n\n    let globalExport;\n    try {\n      globalExport = global[globalProp];\n    }\n    catch (e) {\n      return emptyInstantiation;\n    }\n\n    return [[], function (_export) {\n      return {\n        execute: function () {\n          _export({ default: globalExport, __useDefault: true });\n        }\n      };\n    }];\n  };\n})(typeof self !== 'undefined' ? self : global);\n"],"names":[],"mappings":"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"}